<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<title>PSEUDOTUBE</title>
		<link rel="stylesheet" href="{{ url_for('static', filename='common.css') }}">
	</head>
	<body>

		{% include 'top-bar.html' %}
		<div class="watch-container">

			<div class="video-player">
				<video controls src="{{ video_info.video.uri }}"></video>
			</div>

			<div class="title-like-row">
				<div style="flex:1; min-width: 0;">
					<div class="video-title">{{ video_info.video.title }}</div>
					<div class="uploader-info">
						<img src="{{ video_info.uploader.picture }}" class="uploader-avatar" />
					</div>
				</div>
				<button class="like-button" aria-label="Like video">
					❤️ {{ video_info.like_count }}
				</button>
			</div>

			{% if video_info.video.description != None %}
				<div class="video-description">{{ video_info.video.description }}</div>
			{% endif %}

			<form class="comment-form" method="POST" action="/watch/{{ video_info.video.hash }}#comments">
				<textarea name="comment_text" class="comment-input" rows="3" placeholder="Add a comment..."></textarea>
				<button type="submit" class="comment-submit-btn">Submit</button>
			</form>

			<div id="comments" class="comments-section">
				{% for comment in video_info.comments %}
				<div class="comment">
					<img src="{{ comment.user.picture }}" alt="Commenter avatar" class="comment-avatar" />
					<div class="comment-content">
						<div class="comment-meta">{{ comment.created_at.strftime('%b %d, %Y') }}</div>
						<div class="comment-text">{{ comment.text }}</div>
					</div>
				</div>
				{% else %}
				<p>No comments yet. Be the first to comment!</p>
				{% endfor %}
			</div>

		</div>

	</body>
</html>
